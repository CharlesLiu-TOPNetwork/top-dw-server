
<hr style="FILTER:alpha(opacity=100,finishopacity=0,style=3)" width="90%" color=#f4a460 SIZE=1>
<div class = "div_name">
    metrics_counter
</div>
<div class= "echartdiv" id="validator_tx_request" ></div>
<script type="text/javascript">
    var clone = function (obj) {
        return JSON.parse(JSON.stringify(obj));
    }
    var myChart = echarts.init(document.getElementById('validator_tx_request'));
    var cal_flag = 0;
    function cal_tps(option){
        count_data = option.series.find((x) => x['name'] = 'count')['data']
        value_data = option.series.find((x) => x['name'] = 'value')['data']
        ts_data = option.xAxis[0]['data']
        
        var count_tps_data = new Array()
        var value_tps_data = new Array()
        count_tps_data.push(0)
        value_tps_data.push(0)
        for(i = 1; i< ts_data.length;i++){
            var date1 = new Date(ts_data[i])
            var date0 = new Date(ts_data[i-1])
            count_tps_data.push((((count_data[i] - count_data[i-1]) / ((date1 - date0) / 1000)).toFixed(2)))
            value_tps_data.push((((value_data[i] - value_data[i-1]) / ((date1 - date0) / 1000)).toFixed(2)))
        }
        
        count_tps_series_data = {
            type:'line',
            name:'count_tps',
            data: count_tps_data,
        }
        value_tps_series_data = {
            type:'line',
            name:'value_tps',
            data: value_tps_data,
        }
        
        koption.legend.data.push('count_tps');
        koption.series.push(count_tps_series_data)
        
        koption.legend.data.push('value_tps');
        koption.series.push(value_tps_series_data)
        
        console.log(option.series)
        myChart.setOption(koption, true)
        return
    };

    var option = {
        title: {
            text: 'validator_tx_request',
            subtext : 'from [BANNER_workload_0adee5d_20210827] 137.184.23.122 rpc',
            textStyle:{
                width: 450,
                overflow: "break",
            },
        },
        toolbox:{
            show: true,
            feature: {
                dataZoom:{
                    yAxisIndex: "none"
                },
                dataView: {
                    readOnly: true
                },
                restore: {},
                saveAsImage: {
                    name:"[BANNER_workload_0adee5d_20210827] 137.184.23.122 rpc_validator_tx_request"
                }, 
                myTool1: {
                    show: true,
                    title: '计算tps',
                    icon: 'path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-　　　　　　6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891',
                    onclick: function () {
                        if(cal_flag ==1 ) return;
                        cal_flag = 1;
                        var t_option = myChart.getOption()
                        console.log(t_option.series)
                        cal_tps(t_option)                 
                    }
                },
            },
            right:'10%'
        },
        tooltip:{
            trigger: 'axis'
        },
        dataZoom: [{
            type: 'slider',
            show: true,
            xAxisIndex: [0],
            left: '12%', 
            bottom: '8%',
            start: 0,
            end: 100 
        }],
        legend:{
            data:['count','value','rate',],
            top:"10%",
            selected:{
                'count':false,
                'rate':false
            }
        },
        grid:{
            left: "13%",
            right: "10%",
            bottom: "20%",
            top: "20%",
        },
        xAxis: {
            name: "发送时间",
            type: 'category',
            data: ['2021-08-27 00:00:00','2021-08-27 00:05:00','2021-08-27 00:10:00','2021-08-27 00:15:00','2021-08-27 00:20:00','2021-08-27 00:25:00','2021-08-27 00:30:00','2021-08-27 00:35:00','2021-08-27 00:40:00','2021-08-27 00:45:00','2021-08-27 00:50:00','2021-08-27 00:55:00','2021-08-27 01:00:00','2021-08-27 01:05:00','2021-08-27 01:10:00','2021-08-27 01:15:00','2021-08-27 01:20:00','2021-08-27 01:25:00','2021-08-27 01:30:00','2021-08-27 01:35:00','2021-08-27 01:40:00','2021-08-27 01:45:00','2021-08-27 01:50:00','2021-08-27 01:55:00','2021-08-27 02:00:00','2021-08-27 02:05:00','2021-08-27 02:10:00','2021-08-27 02:15:00','2021-08-27 02:20:00','2021-08-27 02:25:00','2021-08-27 02:30:00','2021-08-27 02:35:00','2021-08-27 02:40:00','2021-08-27 02:45:00','2021-08-27 02:50:00','2021-08-27 02:55:00','2021-08-27 03:00:00','2021-08-27 03:05:00','2021-08-27 03:10:00','2021-08-27 03:15:00','2021-08-27 03:20:00','2021-08-27 03:25:00','2021-08-27 03:30:00','2021-08-27 03:35:00','2021-08-27 03:40:00','2021-08-27 03:45:00','2021-08-27 03:50:00','2021-08-27 03:55:00','2021-08-27 04:00:00','2021-08-27 04:05:00','2021-08-27 04:10:00','2021-08-27 04:15:00','2021-08-27 04:20:00','2021-08-27 04:25:00','2021-08-27 04:30:00','2021-08-27 04:35:00','2021-08-27 04:40:00','2021-08-27 04:45:00','2021-08-27 04:50:00','2021-08-27 04:55:00','2021-08-27 05:00:00','2021-08-27 05:05:00','2021-08-27 05:10:00','2021-08-27 05:15:00','2021-08-27 05:20:00','2021-08-27 05:25:00','2021-08-27 05:30:00','2021-08-27 05:35:00','2021-08-27 05:40:00','2021-08-27 05:45:00','2021-08-27 05:50:00','2021-08-27 05:55:00','2021-08-27 06:00:00','2021-08-27 06:05:00','2021-08-27 06:10:00','2021-08-27 06:15:00','2021-08-27 06:20:00','2021-08-27 06:25:00','2021-08-27 06:30:00','2021-08-27 06:35:00','2021-08-27 06:40:00','2021-08-27 06:45:00','2021-08-27 06:50:00','2021-08-27 06:55:00','2021-08-27 07:00:00','2021-08-27 07:05:00','2021-08-27 07:10:00','2021-08-27 07:15:00','2021-08-27 07:20:00','2021-08-27 07:25:00','2021-08-27 07:30:00','2021-08-27 07:35:00','2021-08-27 07:40:00','2021-08-27 07:45:00','2021-08-27 07:50:00','2021-08-27 07:55:00','2021-08-27 08:00:00','2021-08-27 08:05:00','2021-08-27 08:10:00','2021-08-27 08:15:00','2021-08-27 08:20:00','2021-08-27 08:25:00','2021-08-27 08:30:00','2021-08-27 08:35:00','2021-08-27 08:40:00','2021-08-27 08:45:00',]
        },
        yAxis: {
            type: 'value'
        },
        series: [{
                type: 'line',
                name: 'count',
                data: [10000,20000,30000,45000,60000,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,]
            },{
                type: 'line',
                name: 'value',
                data: [10000,20000,30000,45000,60000,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,]
            },{
                type: 'line',
                name: 'rate',
                data: [1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,]
            },]
    };
    
    var koption = option;
    option && myChart.setOption(option);
</script>
<hr style="FILTER:alpha(opacity=100,finishopacity=0,style=3)" width="90%" color=#f4a460 SIZE=1>
<div class = "div_name">
    metrics_timer
</div>
<div class= "echartdiv" id="net_iothread_dispatch_shard_rpc_handler" ></div>
<script type="text/javascript">
    var myChart_2 = echarts.init(document.getElementById('net_iothread_dispatch_shard_rpc_handler'));
    var option = {
        title: {
            text: 'net_iothread_dispatch_shard_rpc_handler',
            subtext : 'from [BANNER_workload_0adee5d_20210827]137.184.23.122 rpc',
            textStyle:{
                width: 450,
                overflow: "break",
            },
        },
        toolbox:{
            show: true,
            feature: {
                dataZoom:{
                    yAxisIndex: "none"
                },
                dataView: {
                    readOnly: true
                },
                restore: {},
                saveAsImage: {
                    name:"[BANNER_workload_0adee5d_20210827]137.184.23.122 rpc_net_iothread_dispatch_shard_rpc_handler"
                }
                
            },
            right:'10%'
        },
        tooltip:{
            trigger: 'axis'
        },
        dataZoom: [{
            type: 'slider',
            show: true,
            xAxisIndex: [0],
            left: '12%', 
            bottom: '8%',
            start: 0,
            end: 100 
        }],
        legend:{
            data:['count','max_time','min_time','avg_time','sum_time',],
            top:"10%",
            selected:{
                'count':false,
                'rate':false
            }
        },
        grid:{
            left: "13%",
            right: "10%",
            bottom: "20%",
            top: "20%",
        },
        xAxis: {
            name: "发送时间",
            type: 'category',
            data: ['2021-08-27 00:00:00','2021-08-27 00:05:00','2021-08-27 00:10:00','2021-08-27 00:15:00','2021-08-27 00:20:00','2021-08-27 00:25:00','2021-08-27 00:30:00','2021-08-27 00:35:00','2021-08-27 00:40:00','2021-08-27 00:45:00','2021-08-27 00:50:00','2021-08-27 00:55:00','2021-08-27 01:00:00','2021-08-27 01:05:00','2021-08-27 01:10:00','2021-08-27 01:15:00','2021-08-27 01:20:00','2021-08-27 01:25:00','2021-08-27 01:30:00','2021-08-27 01:35:00','2021-08-27 01:40:00','2021-08-27 01:45:00','2021-08-27 01:50:00','2021-08-27 01:55:00','2021-08-27 02:00:00','2021-08-27 02:05:00','2021-08-27 02:10:00','2021-08-27 02:15:00','2021-08-27 02:20:00','2021-08-27 02:25:00','2021-08-27 02:30:00','2021-08-27 02:35:00','2021-08-27 02:40:00','2021-08-27 02:45:00','2021-08-27 02:50:00','2021-08-27 02:55:00','2021-08-27 03:00:00','2021-08-27 03:05:00','2021-08-27 03:10:00','2021-08-27 03:15:00','2021-08-27 03:20:00','2021-08-27 03:25:00','2021-08-27 03:30:00','2021-08-27 03:35:00','2021-08-27 03:40:00','2021-08-27 03:45:00','2021-08-27 03:50:00','2021-08-27 03:55:00','2021-08-27 04:00:00','2021-08-27 04:05:00','2021-08-27 04:10:00','2021-08-27 04:15:00','2021-08-27 04:20:00','2021-08-27 04:25:00','2021-08-27 04:30:00','2021-08-27 04:35:00','2021-08-27 04:40:00','2021-08-27 04:45:00','2021-08-27 04:50:00','2021-08-27 04:55:00','2021-08-27 05:00:00','2021-08-27 05:05:00','2021-08-27 05:10:00','2021-08-27 05:15:00','2021-08-27 05:20:00','2021-08-27 05:25:00','2021-08-27 05:30:00','2021-08-27 05:35:00','2021-08-27 05:40:00','2021-08-27 05:45:00','2021-08-27 05:50:00','2021-08-27 05:55:00','2021-08-27 06:00:00','2021-08-27 06:05:00','2021-08-27 06:10:00','2021-08-27 06:15:00','2021-08-27 06:20:00','2021-08-27 06:25:00','2021-08-27 06:30:00','2021-08-27 06:35:00','2021-08-27 06:40:00','2021-08-27 06:45:00','2021-08-27 06:50:00','2021-08-27 06:55:00','2021-08-27 07:00:00','2021-08-27 07:05:00','2021-08-27 07:10:00','2021-08-27 07:15:00','2021-08-27 07:20:00','2021-08-27 07:25:00','2021-08-27 07:30:00','2021-08-27 07:35:00','2021-08-27 07:40:00','2021-08-27 07:45:00','2021-08-27 07:50:00','2021-08-27 07:55:00','2021-08-27 08:00:00','2021-08-27 08:05:00','2021-08-27 08:10:00','2021-08-27 08:15:00','2021-08-27 08:20:00','2021-08-27 08:25:00','2021-08-27 08:30:00','2021-08-27 08:35:00','2021-08-27 08:40:00','2021-08-27 08:45:00',]
        },
        yAxis: {
            type: 'value'
        },
        series: [{
                type: 'line',
                name: 'count',
                data: [66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,66620,]
            },{
                type: 'line',
                name: 'max_time',
                data: [500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,500093,]
            },{
                type: 'line',
                name: 'min_time',
                data: [8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,]
            },{
                type: 'line',
                name: 'avg_time',
                data: [57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,]
            },{
                type: 'line',
                name: 'sum_time',
                data: [3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,3797340,]
            },]
    };
    option && myChart_2.setOption(option);
</script>
<hr style="FILTER:alpha(opacity=100,finishopacity=0,style=3)" width="90%" color=#f4a460 SIZE=1>
<div class = "div_name">
    metrics_flow
</div>
